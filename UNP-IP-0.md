# TCP/UDP/IP学习笔记

##IP概览

### 1.0 IP地址分类

![](https://static001.geekbang.org/resource/image/0b/9e/0b32d6e35ff0bbc5d46cfb87f6669d9e.jpg)
在网络地址中，至少在当时设计的时候，对于A、B、C类主要分两部分，前面一部分是网络号，后面一部分是主机号。这很好理解，大家都是六单元 1001 号，我是小区 A 的六单元 1001 号，而你是小区 B 的六单元 1001 号。

下面这个表格，详细地展示了 A、B、C 三类地址所能包含的主机的数量
![](https://static001.geekbang.org/resource/image/e9/be/e9c59a4b2f0b804356759b10440ea7be.jpg)

### 1.1 CIDR

但是按 A、B、C 三类地址划分网络有不合适的地方，C类地址只能包含254个，现在一个网吧的机器都不只254台。而B类地址能包含的机器数量又太多，6万多台机器放在一个网络下，一般企业基本达不到这个规模，空闲的地址就是浪费

所以有了一个折中的方式叫**无类型域间选路**，简称**CIDR**。这种方式打破了原来设计的几类地址的做法，将 32 位的 IP地址一分为二，前面是网络号，后面是主机号。从哪里分呢？如果注意观察的话可以看到10.100.122.2/24，这个IP 地址中有一个斜杠，斜杠后面有个数字 24。这种地址表示表示形式，就是 CIDR。后面 24 的意思是，32 位中，前 24 位是网络号，后 8 位是主机号。

伴随着 CIDR 存在的，一个是**广播地址**，10.100.122.255。广播地址就是主机号二进制全为1，这样的地址就是这个网段的广播地址。如果发送这个地址，所有 10.100.122 网络里面的机器都可以收到。

另一个是**子网掩码**，255.255.255.0。将子网掩码和 IP 地址进行 AND 计算。前面三个 255，转成二进制都是 1。1 和任何数值取 AND，都是原来数值，因而前三个数不变，为 10.100.122。后面一个 0，转换成二进制是 0，0 和任何数值取 AND，都是 0，因而最后一个数变为 0，合起来就是 10.100.122.0。这就是网络号。**将子网掩码和 IP 地址按位计算 AND，就可得到网络号。**

### 1.2 公有IP地址和私有IP地址